import{d as D,r as f,a as B,z as p,A as F,o as U,b as m,c as x,f as r,l as E,m as n,i as X,t as Y,B as z,C as I,D as s}from"./index.d279406e.js";import{g as L}from"./index.c6ddc126.js";import{u as R}from"./ThemeStore.1afb4f17.js";const W=["width","height"],j=["cx","cy","r","stroke"],q=["d","stroke","stroke-dasharray"],G=["fill","cx","cy"],H=["fill","fill-opacity","cx","cy"],J=D({__name:"EcCircleProgressBar",props:{draggable:{type:Boolean,default:!1},modelValue:{type:Number,default:0},width:{type:Number,default:200},height:{type:Number,default:200},r:{type:Number,default:50},duration:{type:Number,default:.3},bgColor:{type:String,default:"#EBEDF0"},fillColor:{type:String,default:"#10B981"},handleColor:{type:String,default:"#059669"}},emits:["update:modelValue"],setup(o,{emit:c}){const t=o,k=f(null),l={x:t.width/2,y:t.height/2},i=2*Math.PI*t.r,h=B({value:0}),C=f("");p(h,e=>{C.value=`${e.value*i} ${i}`});const w=f(null),d=B({x:0,y:0});p(h,e=>{const a=w.value,{x:u,y}=a.getPointAtLength(e.value*i);d.x=u,d.y=y});function b(e){e<=0||e-h.value>.25?e=0:(e>1||e-h.value<-.25)&&(e=1),c("update:modelValue",e)}function v(e){e<=0?e=0:e>1&&(e=1),L.to(h,{value:e,duration:t.duration})}const P=F(()=>t.modelValue);p(P,e=>v(e)),U(()=>v(t.modelValue));let g=f(!1);function A(e,a){const u=a.x-e.x,y=a.y-e.y;return Math.atan(y/u)/(2*Math.PI)}function T(){g.value=!0}function M(){g.value=!1}function $(e){if(!g.value)return;e.preventDefault();let a=0,u=0;e instanceof MouseEvent?{x:a,y:u}=e:{clientX:a,clientY:u}=e.targetTouches[0];const y=k.value.getBoundingClientRect(),V=a-y.x,N=u-y.y,S=A({x:l.x,y:l.y},{x:V,y:N});V>l.x?b(.25+S):b(.75+S)}return(e,a)=>(m(),x("svg",{ref_key:"root",ref:k,width:o.width,height:o.height,onMousemove:$,onMouseup:M,onTouchmove:$,onTouchend:M,style:{"user-select":"none"}},[r("circle",{fill:"none",cx:l.x,cy:l.y,r:o.r,stroke:o.bgColor,"stroke-width":"20"},null,8,j),r("path",{ref_key:"progress",ref:w,fill:"none",d:`M ${l.x}, ${l.y-o.r} A ${o.r}, ${o.r}, 0, 0, 1, ${l.x}, ${l.y+o.r} A ${o.r}, ${o.r}, 0, 0, 1, ${l.x}, ${l.y-o.r}`,stroke:o.fillColor,"stroke-width":"13","stroke-linecap":"round","stroke-dasharray":C.value},null,8,q),o.draggable?(m(),x("circle",{key:0,fill:o.handleColor,cx:d.x,cy:d.y,r:"13"},null,8,G)):E("",!0),o.draggable?(m(),x("circle",{key:1,onMousedown:T,onTouchstart:T,fill:o.handleColor,"fill-opacity":n(g)?.3:0,cx:d.x,cy:d.y,r:"20"},null,40,H)):E("",!0)],40,W))}}),K=r("h2",null,"\u4E00\u4E2A\u4E1D\u6ED1\u7684\u73AF\u5F62\u8FDB\u5EA6\u6761",-1),_=D({__name:"index",setup(o){const c=f(.6),t=R();return(k,l)=>(m(),x("div",null,[K,X(J,{width:200,height:200,r:80,duration:.5,"bg-color":n(t).colors.lightText,"fill-color":n(t).colors.primaryColor,"handle-color":n(t).colors.darkPrimaryColor,modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=i=>c.value=i),draggable:""},null,8,["duration","bg-color","fill-color","handle-color","modelValue"]),r("p",null,Y(c.value.toFixed(2)),1),z(r("input",{type:"number","onUpdate:modelValue":l[1]||(l[1]=i=>c.value=i)},null,512),[[I,c.value]]),r("div",{style:s({backgroundColor:n(t).colors.darkPrimaryColor})},[r("p",{style:s({color:n(t).colors.lightPrimaryText})},"hello, world",4),r("p",{style:s({color:n(t).colors.lightText})},"hello, world",4),r("p",{style:s({color:n(t).colors.lightSecondaryText})}," hello, world ",4)],4),r("div",{style:s({backgroundColor:n(t).colors.lightPrimaryColor})},[r("p",{style:s({color:n(t).colors.darkPrimaryText})},"hello, world",4),r("p",{style:s({color:n(t).colors.darkText})},"hello, world",4),r("p",{style:s({color:n(t).colors.darkSecondaryText})}," hello, world ",4)],4)]))}});export{_ as default};
