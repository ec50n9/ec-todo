import{d as P,r as f,a as E,w as p,m as F,o as U,b as m,c as x,f as r,q as B,i as n,h as X,t as Y,s as I,v as q,x as s}from"./index.75fd573a.js";import{g as z,u as L}from"./ThemeStore.b28ef9d6.js";const R=["width","height"],W=["cx","cy","r","stroke"],j=["d","stroke","stroke-dasharray"],G=["fill","cx","cy"],H=["fill","fill-opacity","cx","cy"],J=P({__name:"EcCircleProgressBar",props:{draggable:{type:Boolean,default:!1},modelValue:{type:Number,default:0},width:{type:Number,default:200},height:{type:Number,default:200},r:{type:Number,default:50},duration:{type:Number,default:.3},bgColor:{type:String,default:"#EBEDF0"},fillColor:{type:String,default:"#10B981"},handleColor:{type:String,default:"#059669"}},emits:["update:modelValue"],setup(o,{emit:c}){const t=o,k=f(null),l={x:t.width/2,y:t.height/2},i=2*Math.PI*t.r,y=E({value:0}),w=f("");p(y,e=>{w.value=`${e.value*i} ${i}`});const v=f(null),d=E({x:0,y:0});p(y,e=>{const a=v.value,{x:u,y:h}=a.getPointAtLength(e.value*i);d.x=u,d.y=h});function C(e){e<=0||e-y.value>.25?e=0:(e>1||e-y.value<-.25)&&(e=1),c("update:modelValue",e)}function b(e){e<=0?e=0:e>1&&(e=1),z.to(y,{value:e,duration:t.duration})}const D=F(()=>t.modelValue);p(D,e=>b(e)),U(()=>b(t.modelValue));let g=f(!1);function N(e,a){const u=a.x-e.x,h=a.y-e.y;return Math.atan(h/u)/(2*Math.PI)}function T(){g.value=!0}function M(){g.value=!1}function $(e){if(!g.value)return;e.preventDefault();let a=0,u=0;e instanceof MouseEvent?{x:a,y:u}=e:{clientX:a,clientY:u}=e.targetTouches[0];const h=k.value.getBoundingClientRect(),V=a-h.x,A=u-h.y,S=N({x:l.x,y:l.y},{x:V,y:A});V>l.x?C(.25+S):C(.75+S)}return(e,a)=>(m(),x("svg",{ref_key:"root",ref:k,width:o.width,height:o.height,onMousemove:$,onMouseup:M,onTouchmove:$,onTouchend:M,style:{"user-select":"none"}},[r("circle",{fill:"none",cx:l.x,cy:l.y,r:o.r,stroke:o.bgColor,"stroke-width":"20"},null,8,W),r("path",{ref_key:"progress",ref:v,fill:"none",d:`M ${l.x}, ${l.y-o.r} A ${o.r}, ${o.r}, 0, 0, 1, ${l.x}, ${l.y+o.r} A ${o.r}, ${o.r}, 0, 0, 1, ${l.x}, ${l.y-o.r}`,stroke:o.fillColor,"stroke-width":"13","stroke-linecap":"round","stroke-dasharray":w.value},null,8,j),o.draggable?(m(),x("circle",{key:0,fill:o.handleColor,cx:d.x,cy:d.y,r:"13"},null,8,G)):B("",!0),o.draggable?(m(),x("circle",{key:1,onMousedown:T,onTouchstart:T,fill:o.handleColor,"fill-opacity":n(g)?.3:0,cx:d.x,cy:d.y,r:"20"},null,40,H)):B("",!0)],40,R))}}),K=r("h2",null,"\u4E00\u4E2A\u4E1D\u6ED1\u7684\u73AF\u5F62\u8FDB\u5EA6\u6761",-1),Z=P({__name:"index",setup(o){const c=f(.6),t=L();return(k,l)=>(m(),x("div",null,[K,X(J,{width:200,height:200,r:80,duration:.5,"bg-color":n(t).colors.lightText,"fill-color":n(t).colors.primaryColor,"handle-color":n(t).colors.darkPrimaryColor,modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=i=>c.value=i),draggable:""},null,8,["duration","bg-color","fill-color","handle-color","modelValue"]),r("p",null,Y(c.value.toFixed(2)),1),I(r("input",{type:"number","onUpdate:modelValue":l[1]||(l[1]=i=>c.value=i)},null,512),[[q,c.value]]),r("div",{style:s({backgroundColor:n(t).colors.darkPrimaryColor})},[r("p",{style:s({color:n(t).colors.lightPrimaryText})},"hello, world",4),r("p",{style:s({color:n(t).colors.lightText})},"hello, world",4),r("p",{style:s({color:n(t).colors.lightSecondaryText})}," hello, world ",4)],4),r("div",{style:s({backgroundColor:n(t).colors.lightPrimaryColor})},[r("p",{style:s({color:n(t).colors.darkPrimaryText})},"hello, world",4),r("p",{style:s({color:n(t).colors.darkText})},"hello, world",4),r("p",{style:s({color:n(t).colors.darkSecondaryText})}," hello, world ",4)],4)]))}});export{Z as default};
